import{j as e,k as t,u as l,l as a,m as s,p as r,q as n,s as o,v as i,x as c,c as u,a as d,y as v,f as p,F as g,g as m,t as x,b as f,w as h,T as b,d as y,r as w,o as k,n as C}from"./index-CJcph3sv.js";function z(e){return!!a()&&(s(e),!0)}function j(e){return"function"==typeof e?e():l(e)}const B="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const M=Object.prototype.toString,S=()=>{};function T(e){var t;const l=j(e);return null!=(t=null==l?void 0:l.$el)?t:l}const L=B?window:void 0,q=B?window.navigator:void 0;function A(...e){let t,l,a,s;if("string"==typeof e[0]||Array.isArray(e[0])?([l,a,s]=e,t=L):[t,l,a,s]=e,!t)return S;Array.isArray(l)||(l=[l]),Array.isArray(a)||(a=[a]);const r=[],o=()=>{r.forEach((e=>e())),r.length=0},i=n((()=>[T(t),j(s)]),(([e,t])=>{if(o(),!e)return;const s=(n=t,"[object Object]"===M.call(n)?{...t}:t);var n;r.push(...l.flatMap((t=>a.map((l=>((e,t,l,a)=>(e.addEventListener(t,l,a),()=>e.removeEventListener(t,l,a)))(e,t,l,s))))))}),{immediate:!0,flush:"post"}),c=()=>{i(),o()};return z(c),c}function _(t){const l=function(){const t=e(!1),l=i();return l&&o((()=>{t.value=!0}),l),t}();return r((()=>(l.value,Boolean(t()))))}function E(t,l={}){const{controls:a=!1,navigator:s=q}=l,r=_((()=>s&&"permissions"in s));let n;const o="string"==typeof t?{name:t}:t,i=e(),c=()=>{n&&(i.value=n.state)},u=function(e){let t;function l(){return t||(t=e()),t}return l.reset=async()=>{const e=t;t=void 0,e&&await e},l}((async()=>{if(r.value){if(!n)try{n=await s.permissions.query(o),A(n,"change",c),c()}catch(e){i.value="prompt"}return n}}));return u(),a?{state:i,isSupported:r,query:u}:i}function P(l={}){const{navigator:a=q,read:s=!1,source:n,copiedDuring:o=1500,legacy:i=!1}=l,c=_((()=>a&&"clipboard"in a)),u=E("clipboard-read"),d=E("clipboard-write"),v=r((()=>c.value||i)),p=e(""),g=e(!1),m=function(l,a,s={}){const{immediate:r=!0}=s,n=e(!1);let o=null;function i(){o&&(clearTimeout(o),o=null)}function c(){n.value=!1,i()}function u(...e){i(),n.value=!0,o=setTimeout((()=>{n.value=!1,o=null,l(...e)}),j(a))}return r&&(n.value=!0,B&&u()),z(c),{isPending:t(n),start:u,stop:c}}((()=>g.value=!1),o);function x(e){return"granted"===e||"prompt"===e}return v.value&&s&&A(["copy","cut"],(function(){var e,t,l;c.value&&x(u.value)?a.clipboard.readText().then((e=>{p.value=e})):p.value=null!=(l=null==(t=null==(e=null==document?void 0:document.getSelection)?void 0:e.call(document))?void 0:t.toString())?l:""})),{isSupported:v,text:p,copied:g,copy:async function(e=j(n)){v.value&&null!=e&&(c.value&&x(d.value)?await a.clipboard.writeText(e):function(e){const t=document.createElement("textarea");t.value=null!=e?e:"",t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(e),p.value=e,g.value=!0,m.start())}}}const I={class:"min-h-screen bg-base-100"},H={class:"relative bg-gradient-to-r from-primary to-secondary overflow-hidden"},R={class:"container mx-auto px-4 py-4"},V={class:"flex flex-col md:flex-row items-center justify-between gap-4"},$={class:"flex items-center gap-3"},D={class:"relative w-10 h-10"},G=["src"],O={key:0,class:"animate-spin"},Q={key:1,class:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor"},W={key:0,d:"M8 5v14l11-7z"},F={key:1,d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},N={class:"text-xl font-semibold text-white"},Y={class:"text-sm text-white/90"},J={class:"text-xs text-white/60"},K={class:"text-sm text-white/80"},U={class:"text-white/70 whitespace-pre-wrap font-minecraft"},X={key:0,class:"text-sm text-white/70"},Z={class:"flex items-center gap-4"},ee={class:"relative group flex-1 max-w-2xl"},te={class:"flex-1 py-2 pl-4 text-white font-mono truncate"},le={class:"flex items-center gap-2 text-white/80"},ae={class:"text-xs"},se={key:0,class:"absolute top-full mt-2 right-0 bg-green-500 text-white px-3 py-1.5 rounded-md text-sm"},re={class:"container mx-auto px-4 py-8"},ne={class:"mb-12"},oe={class:"grid md:grid-cols-3 gap-6"},ie={class:"flex items-start gap-4"},ce={class:"text-xl font-semibold mb-2"},ue={class:"text-gray-300 text-sm leading-relaxed"},de={class:"mb-12"},ve=["src"],pe={class:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent flex items-end p-3 opacity-0 group-hover:opacity-100 transition-all duration-300"},ge={class:"text-white text-sm font-medium"},me={__name:"ServerView",setup(t){const l=e([{title:"红石工程",icon:"⚙️",desc:"全自动农场 | 工业级生产线 | TNT炮械系统 | 珍珠炮",color:"from-blue-500/20 to-blue-600/10",iconBg:"bg-blue-500/20"},{title:"生电科技",icon:"🔌",desc:"实体压缩 | 堆叠限高 | 高效分类 | 区块加载器",color:"from-green-500/20 to-green-600/10",iconBg:"bg-green-500/20"},{title:"极限优化",icon:"🚀",desc:"区块预加载 | 实体管控 | 多核分布式 | 内存优化",color:"from-yellow-500/20 to-yellow-600/10",iconBg:"bg-yellow-500/20"}]),a=e({online:!1,players:0,maxPlayers:0,version:"1.20.4",ip:"especial.top",motd:"",ping:0,protocol:0,secureChat:!1,icon:null,motdRaw:{text:""},loading:!0,error:null}),{copy:s,isSupported:r}=P(),n=e(!1),i=async()=>{r&&(await s(a.value.ip),n.value=!0,setTimeout((()=>n.value=!1),2e3))},z=e(!1),j=e(0),B=e(!1),M=e(0),S=async(e=!0)=>{try{a.value.loading=!0,a.value.error=null;const e=await fetch(`/api/minecraft/server/${a.value.ip}`),t=await e.json();if("online"!==t.status)throw new Error("服务器离线");a.value={...a.value,online:!0,players:t.players.online,maxPlayers:t.players.max,version:t.version.name,motdRaw:t.motd.raw||{text:"A Minecraft Server"},protocol:t.version.protocol,secureChat:t.enforces_secure_chat,icon:t.icon,ping:Math.round(t.latency),loading:!1},j.value=0,B.value=!1}catch(t){if(a.value.error=t.message,a.value.online=!1,e&&j.value<3){j.value++,B.value=!0,M.value=5;const e=setInterval((()=>{M.value--}),1e3);return await new Promise((e=>setTimeout(e,5e3))),clearInterval(e),S(!0)}}finally{a.value.loading=!1}},T=async()=>{j.value=0,B.value=!1,await S()};let L;return o((()=>{S(),L=setInterval(S,3e4),z.value=!0})),c((()=>{L&&clearInterval(L)})),(e,t)=>(k(),u("div",I,[d("div",H,[t[5]||(t[5]=d("div",{class:"absolute inset-0 overflow-hidden"},[d("div",{class:"absolute -inset-[10px] bg-gradient-to-r from-white/10 to-transparent rotate-12 transform-gpu blur-3xl"})],-1)),d("div",R,[d("div",V,[d("div",$,[d("div",D,[a.value.icon?(k(),u("img",{key:0,src:a.value.icon,class:"w-10 h-10 rounded-lg",alt:"服务器图标"},null,8,G)):(k(),u("div",{key:1,class:p(["relative flex items-center justify-center w-10 h-10 rounded-full",[a.value.loading?"bg-yellow-500":a.value.online?"bg-green-500":"bg-red-500"]])},[a.value.loading?(k(),u("span",O,"⟳")):(k(),u("svg",Q,[a.value.online?(k(),u("path",W)):(k(),u("path",F))]))],2))]),d("div",null,[d("h2",N,[a.value.loading?(k(),u(g,{key:0},[t[0]||(t[0]=m(" 获取状态中... ")),B.value?(k(),u(g,{key:0},[m(" (重试 "+x(j.value)+"/"+x(3)+", "+x(M.value)+"s) ",1)],64)):v("",!0)],64)):a.value.online?(k(),u(g,{key:1},[m(x(a.value.players)+"/"+x(a.value.maxPlayers)+" 人在线 ",1)],64)):(k(),u(g,{key:2},[m(x(a.value.error||"服务器离线")+" ",1),B.value?v("",!0):(k(),u("button",{key:0,onClick:T,class:"ml-2 px-2 py-1 text-sm bg-white/10 hover:bg-white/20 rounded transition-colors"}," 重试 "))],64))]),a.value.online?(k(),u(g,{key:0},[d("p",Y,[m(" 版本 "+x(a.value.version)+" ",1),d("span",J,"(协议: "+x(a.value.protocol)+")",1),t[1]||(t[1]=d("span",{class:"mx-2"},"·",-1)),m(" 延迟 "+x(a.value.ping)+"ms ",1),t[2]||(t[2]=d("span",{class:"mx-2"},"·",-1)),d("span",{class:p(a.value.secureChat?"text-green-300":"text-yellow-300")},x(a.value.secureChat?"安全聊天已启用":"安全聊天未启用"),3)]),d("div",K,[t[3]||(t[3]=d("p",{class:"font-medium"},"服务器公告:",-1)),d("p",U,x(a.value.motdRaw.text),1)])],64)):v("",!0)]),a.value.online||a.value.loading?v("",!0):(k(),u("p",X," 无法连接到服务器，请检查服务器地址或稍后重试 "))]),d("div",Z,[d("div",ee,[d("div",{class:p(["flex items-center bg-white/10 backdrop-blur-sm rounded-lg pr-2 transition-all hover:bg-white/20 cursor-pointer",{"opacity-50 pointer-events-none":!a.value.online}]),onClick:i},[d("code",te,"/connect "+x(a.value.ip),1),d("div",le,[d("span",ae,x(a.value.online?"点击复制":"服务器离线"),1),t[4]||(t[4]=d("button",{class:"p-2 hover:text-white transition-colors"},[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1))])],2),f(b,{name:"fade"},{default:h((()=>[n.value?(k(),u("div",se," 已复制到剪贴板 ")):v("",!0)])),_:1})])])])])]),d("main",re,[t[8]||(t[8]=y('<div class="card bg-gradient-to-br from-base-200 to-base-300 shadow-xl mb-12"><div class="card-body"><h2 class="card-title text-3xl mb-4"><span class="bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent"> 生电工程服务器 </span></h2><div class="text-sm text-gray-400 mb-4"> 「红石矩阵」生电特化 | 长期存档 | 技术社区 </div><a href="https://qm.qq.com/q/4pcvaxdYpi" target="_blank" rel="noopener noreferrer" class="btn btn-outline btn-sm w-fit hover:bg-white/10 hover:border-white/20 transition-all"><svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M8.5 18l3.5 2 3.5-2H19c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2H5c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h3.5zM12 13.5c1.375 0 2.5-1.125 2.5-2.5S13.375 8.5 12 8.5 9.5 9.625 9.5 11s1.125 2.5 2.5 2.5z"></path></svg> 加入QQ交流群 </a></div></div>',1)),d("section",ne,[t[6]||(t[6]=d("h2",{class:"text-3xl font-bold mb-8 text-center bg-clip-text text-transparent bg-gradient-to-br from-primary to-accent"}," 生电核心功能 ",-1)),d("div",oe,[(k(!0),u(g,null,w(l.value,((e,t)=>(k(),u("div",{key:e.title,class:p(["relative p-6 rounded-xl backdrop-blur-sm transition-all duration-300 hover:scale-[1.02]",e.color])},[d("div",ie,[d("div",{class:p(["flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center text-2xl",e.iconBg])},x(e.icon),3),d("div",null,[d("h3",ce,x(e.title),1),d("p",ue,x(e.desc),1)])]),d("div",{class:p(["absolute inset-0 -z-10 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300",e.color.replace("from","from-opacity-0").replace("to","to-opacity-0")])},null,2)],2)))),128))])]),t[9]||(t[9]=y('<section class="mb-12"><h2 class="text-3xl font-bold mb-8 text-center bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary"> 技术规范 </h2><div class="grid lg:grid-cols-2 gap-4"><div class="relative rounded-xl p-6 bg-gradient-to-br from-blue-500/10 to-transparent hover:shadow-lg transition-all duration-300"><div class="absolute inset-0 rounded-xl bg-white/60 backdrop-blur-sm -z-10"></div><div class="flex items-center gap-3 mb-4"><div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600">🎯</div><h3 class="text-xl font-semibold">红石规范</h3></div><ul class="space-y-2.5 text-gray-600 text-sm"><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> 允许高频红石（需申报） </li><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> 禁止恶意卡服装置 </li><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> 支持跨维度传输系统 </li></ul></div><div class="relative rounded-xl p-6 bg-gradient-to-br from-orange-500/10 to-transparent hover:shadow-lg transition-all duration-300"><div class="absolute inset-0 rounded-xl bg-white/60 backdrop-blur-sm -z-10"></div><div class="flex items-center gap-3 mb-4"><div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600">🏰</div><h3 class="text-xl font-semibold">性能规范</h3></div><ul class="space-y-2.5 text-gray-600 text-sm"><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> 单机上限 1000 实体 </li><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> 区块加载需申请权限 </li><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> 支持多线程运算 </li></ul></div></div></section>',1)),d("section",de,[t[7]||(t[7]=d("h2",{class:"text-3xl font-bold mb-8 text-center bg-clip-text text-transparent bg-gradient-to-br from-secondary to-accent"}," 工程案例 ",-1)),d("div",{class:p(["grid grid-cols-2 md:grid-cols-4 gap-3",{"opacity-0 translate-y-8":!z.value,"opacity-100 translate-y-0":z.value}]),style:{transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)"}},[(k(),u(g,null,w(8,(e=>d("div",{key:e,class:"aspect-square relative group overflow-hidden rounded-lg bg-base-200 transform transition-all duration-300 hover:scale-[1.02] hover:shadow-xl",style:C({transitionDelay:50*e+"ms"})},[d("img",{src:`/screenshots/${e}.jpg`,class:"w-full h-full object-cover transform transition-all duration-500 group-hover:scale-110 group-hover:rotate-1",alt:"工程案例"},null,8,ve),d("div",pe,[d("span",ge,"案例 "+x(e)+" - "+x(["农场","分类","炮械","堆叠"][e%4]),1)])],4))),64))],2)])])]))}};export{me as default};
